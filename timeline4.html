<!-- Full updated code with vertical staggering, legend, secondary chart, regression line, zoom, and pulse markers -->
<html>
<head>
<style>
  body { font-family: Arial, sans-serif; background: #f4f7fb; }
  .container { width: 100%; max-width: 1200px; margin: auto; padding: 20px; }
  .timeline-chart { position: relative; width: 100%; height: 450px; background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); overflow: hidden; }

  .point { position: absolute; width: 18px; height: 18px; border-radius: 50%; cursor: pointer; animation: pulse 2s infinite; }
  @keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.4); opacity: 0.6; }
    100% { transform: scale(1); opacity: 1; }
  }

  .legend { display: flex; gap: 20px; margin-top: 20px; }
  .legend-item { display: flex; align-items: center; gap: 8px; }
  .legend-color { width: 15px; height: 15px; border-radius: 4px; }

  .zoom-buttons { margin-top: 20px; display: flex; gap: 10px; }
  .zoom-buttons button { padding: 10px 20px; border: none; background: #4a90e2; color: white; border-radius: 8px; cursor: pointer; }

  #sectorChart { margin-top: 30px; width: 100%; height: 300px; }
</style>
</head>
<body>
<div class="container">

  <div class="timeline-chart" id="timelineChart">
    <!-- Points randomly staggered vertically but placed chronologically left-to-right -->
    <div class="point" style="left: 2%; top: 70%; background: #4a90e2;" title="1998 - IT"></div>
    <div class="point" style="left: 8%; top: 40%; background: #9b59b6;" title="2000 - Diseño"></div>
    <div class="point" style="left: 14%; top: 55%; background: #4a90e2;" title="2001 - Técnico IT"></div>
    <div class="point" style="left: 22%; top: 30%; background: #e67e22;" title="2002 - Hostelería"></div>
    <div class="point" style="left: 30%; top: 60%; background: #1abc9c;" title="2003 - Administración I+D"></div>
    <div class="point" style="left: 36%; top: 45%; background: #4a90e2;" title="2004 - IT"></div>
    <div class="point" style="left: 46%; top: 25%; background: #9b59b6;" title="2005 - Diseño"></div>
    <div class="point" style="left: 55%; top: 65%; background: #4a90e2;" title="2007 - Laboratorio IT"></div>
    <div class="point" style="left: 65%; top: 35%; background: #e74c3c;" title="2008 - Varios sectores"></div>
    <div class="point" style="left: 76%; top: 50%; background: #4a90e2;" title="2010 - IT"></div>
    <div class="point" style="left: 90%; top: 30%; background: #4a90e2;" title="2020 - Web/IT"></div>
  </div>

  <div class="legend">
    <div class="legend-item"><div class="legend-color" style="background:#4a90e2"></div>IT</div>
    <div class="legend-item"><div class="legend-color" style="background:#9b59b6"></div>Diseño</div>
    <div class="legend-item"><div class="legend-color" style="background:#1abc9c"></div>Administración</div>
    <div class="legend-item"><div class="legend-color" style="background:#e67e22"></div>Hostelería</div>
    <div class="legend-item"><div class="legend-color" style="background:#e74c3c"></div>Otros</div>
  </div>

  <div class="zoom-buttons">
    <button onclick="zoomIn()">+</button>
    <button onclick="zoomOut()">-</button>
  </div>

  <canvas id="sectorChart"></canvas>

</div>

<script>
  let zoomLevel = 1;
  function zoomIn(){ zoomLevel += 0.1; document.getElementById('timelineChart').style.transform = `scale(${zoomLevel})`; }
  function zoomOut(){ zoomLevel = Math.max(0.5, zoomLevel - 0.1); document.getElementById('timelineChart').style.transform = `scale(${zoomLevel})`; }

  // Summary chart (percentages by sector)
  const ctx = document.getElementById('sectorChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['IT', 'Diseño', 'Administración', 'Hostelería', 'Otros'],
      datasets: [{ data: [55, 20, 10, 10, 5] }]
    },
    options: { responsive: true }
  });
</script>

</body>
</html>
